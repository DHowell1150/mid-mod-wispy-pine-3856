require "rails_helper"

RSpec.describe Food do
  it "exists and has attributes" do
    incoming_data = {:fdcId=>2700133,
    :description=>" AdvancePierre Flamebroiled Rib Shaped Pork Patty Topped with BBQ Sauce ",
    :dataType=>"Branded",
    :gtinUpc=>"00071421681567",
    :publishedDate=>"2024-08-15",
    :brandOwner=>"Tyson Foods Inc.",
    :brandName=>"Advance Pierre",
    :ingredients=>
     "Ground Pork (No More Than 20% Fat), Water, Textured Vegetable Protein (Soy Protein Concentrate, Caramel Color), Seasoning {Tomato Powder, Dextrose, Brown Sugar, Artificial Vinegar (Malic Acid, Sodium Acetate, Lactose, Fumaric Acid, Artificial Flavor), Worcestershire Sauce Powder (Corn Syrup Solids, Salt, Garlic Powder, Sugar, Spices, Soy Sauce Solids (Wheat, Soybeans, Salt, Maltodextrin, Caramel Color), Tamarind, Natural Flavor), Spices, Spice Extractive, Onion Powder, Natural Smoke Flavor, Garlic Powder}, Honey, Flavor (Potassium Chloride, Yeast Extract, Natural Flavoring, Potato Maltodextrin, Maltodextrin, Soybean Oil), Salt, Potassium Phosphate. Barbecue Sauce (Water, Tomato Paste, Sugar, Distilled Vinegar, Molasses, Contains Less Than 2% Of: Salt, Food Starch - Modified, Natural Hickory Smoke Flavor, Mustard Bran, Spices, Onion Powder, Garlic Powder, Sodium Benzoate As A Preservative, Caramel Color, Natural Flavors).",
    :marketCountry=>"United States",
    :foodCategory=>"Meat/Poultry/Other Animals - Prepared/Processed",
    :modifiedDate=>"2024-01-13",
    :dataSource=>"GDSN",
    :packageWeight=>"21.88 LBR",
    :servingSizeUnit=>"GRM",
    :servingSize=>39.0,
    :householdServingFullText=>"1.39 OZ SERVING,  250 Servings Per Container",
    :gpcClassCode=>50240100,
    :shortDescription=>"APF CN FC FBLD RIB SHP PK PAT BBQ21",
    :preparationStateCode=>"UNPREPARED",
    :tradeChannels=>["NO_TRADE_CHANNEL"],
    :allHighlightFields=>"",
    :score=>-417.03278,
    :microbes=>[{:id=>15, :microbeCode=>"LACTICASEIBACILLUS_PARACASEI", :method=>"AEROBIC_PLATE_COUNT", :minValue=>10000000, :uom=>"X_CFG"}],
    :foodNutrients=>
     [{:nutrientId=>1003,
       :nutrientName=>"Protein",
       :nutrientNumber=>"203",
       :unitName=>"G",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>14.8,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>600,
       :indentLevel=>1,
       :foodNutrientId=>34075212},
      {:nutrientId=>1004,
       :nutrientName=>"Total lipid (fat)",
       :nutrientNumber=>"204",
       :unitName=>"G",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>12.1,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>800,
       :indentLevel=>1,
       :foodNutrientId=>34075213,
       :percentDailyValue=>7},
      {:nutrientId=>1005,
       :nutrientName=>"Carbohydrate, by difference",
       :nutrientNumber=>"205",
       :unitName=>"G",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>10.2,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>1110,
       :indentLevel=>2,
       :foodNutrientId=>34075214,
       :percentDailyValue=>1},
      {:nutrientId=>1008,
       :nutrientName=>"Energy",
       :nutrientNumber=>"208",
       :unitName=>"KCAL",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>209,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>300,
       :indentLevel=>1,
       :foodNutrientId=>34075215,
       :percentDailyValue=>0},
      {:nutrientId=>2000,
       :nutrientName=>"Total Sugars",
       :nutrientNumber=>"269",
       :unitName=>"G",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>8.18,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>1510,
       :indentLevel=>3,
       :foodNutrientId=>34075216,
       :percentDailyValue=>0},
      {:nutrientId=>1079,
       :nutrientName=>"Fiber, total dietary",
       :nutrientNumber=>"291",
       :unitName=>"G",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>1.0,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>1200,
       :indentLevel=>3,
       :foodNutrientId=>34075217,
       :percentDailyValue=>0},
      {:nutrientId=>1087,
       :nutrientName=>"Calcium, Ca",
       :nutrientNumber=>"301",
       :unitName=>"MG",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>41.0,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>5300,
       :indentLevel=>1,
       :foodNutrientId=>34075218,
       :percentDailyValue=>2},
      {:nutrientId=>1089,
       :nutrientName=>"Iron, Fe",
       :nutrientNumber=>"303",
       :unitName=>"MG",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>1.2,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>5400,
       :indentLevel=>1,
       :foodNutrientId=>34075219,
       :percentDailyValue=>2},
      {:nutrientId=>1093,
       :nutrientName=>"Sodium, Na",
       :nutrientNumber=>"307",
       :unitName=>"MG",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>288,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>5800,
       :indentLevel=>1,
       :foodNutrientId=>34075220,
       :percentDailyValue=>5},
      {:nutrientId=>1162,
       :nutrientName=>"Vitamin C, total ascorbic acid",
       :nutrientNumber=>"401",
       :unitName=>"MG",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>1.8,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>6300,
       :indentLevel=>1,
       :foodNutrientId=>34075221,
       :percentDailyValue=>2},
      {:nutrientId=>1253,
       :nutrientName=>"Cholesterol",
       :nutrientNumber=>"601",
       :unitName=>"MG",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>45.0,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>15700,
       :indentLevel=>1,
       :foodNutrientId=>34075222,
       :percentDailyValue=>7},
      {:nutrientId=>1257,
       :nutrientName=>"Fatty acids, total trans",
       :nutrientNumber=>"605",
       :unitName=>"G",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>0.09,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>15400,
       :indentLevel=>1,
       :foodNutrientId=>34075223,
       :percentDailyValue=>0},
      {:nutrientId=>1258,
       :nutrientName=>"Fatty acids, total saturated",
       :nutrientNumber=>"606",
       :unitName=>"G",
       :derivationCode=>"LCGA",
       :derivationDescription=>"Given by information provider as an approximate value per 100 unit measure",
       :derivationId=>78,
       :value=>4.13,
       :foodNutrientSourceId=>9,
       :foodNutrientSourceCode=>"12",
       :foodNutrientSourceDescription=>"Manufacturer's analytical; partial documentation",
       :rank=>9700,
       :indentLevel=>1,
       :foodNutrientId=>34075224,
       :percentDailyValue=>8}],
    :finalFoodInputFoods=>[],
    :foodMeasures=>[],
    :foodAttributes=>[],
    :foodAttributeTypes=>[],
    :foodVersionIds=>[]}

    food = Food.new(incoming_data)
    expect(food).to be_a(Food)
    expect(food.fdcid).to be_a(Integer)
    expect(food.description).to be_a(String)
    expect(food.brand_owner).to be_a(String)
    expect(food.ingredients).to be_a(String)
    expect(food.gtinupc).to be_a(String)
  end
end